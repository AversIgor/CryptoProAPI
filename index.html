<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Cryptoproapi by shanhaichik</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Cryptoproapi</h1>
      <h2 class="project-tagline">Простое API для работы с КриптоПро ЭЦП Browser plug-in</h2>
      <a href="https://github.com/shanhaichik/CryptoProAPI" class="btn">View on GitHub</a>
      <a href="https://github.com/shanhaichik/CryptoProAPI/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/shanhaichik/CryptoProAPI/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="cryptoproapi" class="anchor" href="#cryptoproapi" aria-hidden="true"><span class="octicon octicon-link"></span></a>CryptoProAPI</h1>

<p>Простое API для работы с КриптоПро ЭЦП Browser plug-in</p>

<h3>
<a id="Вкратце" class="anchor" href="#%D0%92%D0%BA%D1%80%D0%B0%D1%82%D1%86%D0%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Вкратце</h3>

<ol>
<li>Подключение</li>
<li>Получение информации из ключа</li>
<li>Получение всех сертификатов установленных на компьютере</li>
<li>Вычисление хеш</li>
<li>Создание подписи</li>
<li>Верификация подписи</li>
</ol>

<h3>
<a id="Использование" class="anchor" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Использование</h3>

<h4>
<a id="Подключение" class="anchor" href="#%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Подключение</h4>

<p>Чтобы эта штура зарботала, достаточно подключить <a href="https://github.com/shanhaichik/CryptoProAPI/blob/master/src/cryptoAPI.js">один файл</a>. </p>

<div class="highlight highlight-html"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>cryptoAPI.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<h4>
<a id="Получение-информации-из-ключа" class="anchor" href="#%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D0%B8-%D0%B8%D0%B7-%D0%BA%D0%BB%D1%8E%D1%87%D0%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Получение информации из ключа</h4>

<h5>
<a id="Метод-getbyhash" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-getbyhash" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод getByHash</h5>

<p>Получение сертификата по хешу ключа (fingerprint)</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> key <span class="pl-k">=</span> CryptoPro.getByHash(<span class="pl-s"><span class="pl-pds">'</span>000000000000000000000000<span class="pl-pds">'</span></span>).get();

<span class="pl-c">// или</span>

<span class="pl-k">var</span> key <span class="pl-k">=</span> CryptoPro.getByHash(<span class="pl-s"><span class="pl-pds">'</span>000000000000000000000000<span class="pl-pds">'</span></span>);
key.get();</pre></div>

<h5>
<a id="Метод-getextendedkeyusage" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-getextendedkeyusage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод getExtendedKeyUsage</h5>

<p>Получение информации из ключа
Получение OID сертификата (улучшенного ключа)</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> key <span class="pl-k">=</span> CryptoPro.getByHash(<span class="pl-s"><span class="pl-pds">'</span>000000000000000000000000<span class="pl-pds">'</span></span>);

key.getExtendedKeyUsage();</pre></div>

<h5>
<a id="Метод-haskeyusageoid" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-haskeyusageoid" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод hasKeyUsageOID</h5>

<p>Проверка наличия OID или группы OID в ключе</p>

<div class="highlight highlight-javascript"><pre>key.hasKeyUsageOID(<span class="pl-s"><span class="pl-pds">'</span>1.3.6.1.5.5.7.3.2<span class="pl-pds">'</span></span>);

<span class="pl-c">//или</span>

key.hasKeyUsageOID([<span class="pl-s"><span class="pl-pds">"</span>1.3.6.1.5.5.7.3.4<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>1.3.6.1.5.5.7.3.2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>1.2.643.2.2.34.6<span class="pl-pds">"</span></span>]);</pre></div>

<h5>
<a id="Метод-iskeyvalid" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-iskeyvalid" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод isKeyValid</h5>

<p>Получение информации валидный ключ или нет</p>

<div class="highlight highlight-javascript"><pre>key.isKeyValid();</pre></div>

<h5>
<a id="Метод-getowner" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-getowner" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод getOwner</h5>

<p>Парсит SubjectName ключа по тегам</p>

<div class="highlight highlight-javascript"><pre>key.getOwner();</pre></div>

<h5>
<a id="Метод-getissuer" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-getissuer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод getIssuer</h5>

<p>Парсит IssuerName ключа по тегам</p>

<div class="highlight highlight-javascript"><pre>key.getIssuer();</pre></div>

<h5>
<a id="Метод-getalgorithm" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-getalgorithm" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод getAlgorithm</h5>

<p>Информауия об алгоритме</p>

<div class="highlight highlight-javascript"><pre>key.getAlgorithm();</pre></div>

<h4>
<a id="Получение-всех-сертификатов-установленных-на-компьютере" class="anchor" href="#%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2%D1%81%D0%B5%D1%85-%D1%81%D0%B5%D1%80%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%BE%D0%B2-%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D1%8B%D1%85-%D0%BD%D0%B0-%D0%BA%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Получение всех сертификатов установленных на компьютере.</h4>

<h5>
<a id="Метод-getlist" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-getlist" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод getList</h5>

<div class="highlight highlight-javascript"><pre>CryptoPro.getList();</pre></div>

<h4>
<a id="Создание-ЭП" class="anchor" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%AD%D0%9F" aria-hidden="true"><span class="octicon octicon-link"></span></a>Создание ЭП</h4>

<h5>
<a id="Метод-signpkcs7" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-signpkcs7" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод SignPkcs7</h5>

<p>Создание ЭП в формате Pkcs7</p>

<p>Параметры:</p>

<ul>
<li>Хеш / Fingerprint {String}</li>
<li>Данные для подписи {String}</li>
<li>Прикрепленная / отсоединенная {Boolean, default:false}</li>
</ul>

<div class="highlight highlight-javascript"><pre>CryptoPro.SignPkcs7(hash, signData, signType);</pre></div>

<h5>
<a id="Метод-signxml" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-signxml" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод SignXML</h5>

<p>Создание ЭП в формате XML</p>

<p>Параметры:</p>

<ul>
<li>Хеш / Fingerprint {String}</li>
<li>Данные для подписи {String}</li>
</ul>

<div class="highlight highlight-javascript"><pre>CryptoPro.SignXML(hash, signData);</pre></div>

<h5>
<a id="Метод-signhash" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-signhash" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод SignHash</h5>

<p>Создание ЭП по хэш значению</p>

<p>Параметры:</p>

<ul>
<li>Хеш / Fingerprint {String}</li>
<li>Вычисленный хеш данных {String}</li>
<li>Отсоединенная {Boolean, default:false}</li>
</ul>

<div class="highlight highlight-javascript"><pre>CryptoPro.SignHash(hash, hashValue, signType);</pre></div>

<h4>
<a id="Вычисление-хеш" class="anchor" href="#%D0%92%D1%8B%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%85%D0%B5%D1%88" aria-hidden="true"><span class="octicon octicon-link"></span></a>Вычисление хеш</h4>

<h5>
<a id="Метод-gethash" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-gethash" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод getHash</h5>

<p>Вычисление хеш значеняи данных по Гост.</p>

<p>Параметры:</p>

<ul>
<li>Строка для вычисления хеш {String}</li>
<li>Вычисления хеш бинарных данных {Boolean, default:false}</li>
</ul>

<div class="highlight highlight-javascript"><pre>CryptoPro.getHash(str, binary);</pre></div>

<h4>
<a id="Верификация-ЭП" class="anchor" href="#%D0%92%D0%B5%D1%80%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F-%D0%AD%D0%9F" aria-hidden="true"><span class="octicon octicon-link"></span></a>Верификация ЭП</h4>

<h5>
<a id="Метод-gethash-1" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-gethash-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод getHash</h5>

<p>Верификация подписи в формате Pkcs7</p>

<p>Параметры:</p>

<ul>
<li>Строка с подписью {String}</li>
<li>Тип подписи открепленная/присоединенная {Boolean, default:false}</li>
</ul>

<div class="highlight highlight-javascript"><pre>CryptoPro.getHash(signature, signType);</pre></div>

<h5>
<a id="Метод-verifyxml" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-verifyxml" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод VerifyXML</h5>

<p>Верификация подписи в формате XML</p>

<p>Параметры:</p>

<ul>
<li>Строка с подписью {String}</li>
</ul>

<div class="highlight highlight-javascript"><pre>CryptoPro.VerifyXML(signature);</pre></div>

<h5>
<a id="Метод-verifyhash" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-verifyhash" aria-hidden="true"><span class="octicon octicon-link"></span></a>Метод VerifyHash</h5>

<p>Верификация подписипо хэш значению</p>

<p>Параметры:</p>

<ul>
<li>Хеш / Fingerprint {String}</li>
<li>Вычисленный хеш данных {String}</li>
<li>Строка с подписью {String}</li>
<li>Отсоединенная {Boolean, default:false}</li>
</ul>

<div class="highlight highlight-javascript"><pre>CryptoPro.VerifyHash(hash, hashValue, signature, signType);</pre></div>

<h4>
<a id="Любые-замечания-баги-и-предложения-приветствуются-и-дают-в-карму-1" class="anchor" href="#%D0%9B%D1%8E%D0%B1%D1%8B%D0%B5-%D0%B7%D0%B0%D0%BC%D0%B5%D1%87%D0%B0%D0%BD%D0%B8%D1%8F-%D0%B1%D0%B0%D0%B3%D0%B8-%D0%B8-%D0%BF%D1%80%D0%B5%D0%B4%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BF%D1%80%D0%B8%D0%B2%D0%B5%D1%82%D1%81%D1%82%D0%B2%D1%83%D1%8E%D1%82%D1%81%D1%8F-%D0%B8-%D0%B4%D0%B0%D1%8E%D1%82-%D0%B2-%D0%BA%D0%B0%D1%80%D0%BC%D1%83-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Любые замечания, баги и предложения приветствуются и дают в карму +1.</h4>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/shanhaichik/CryptoProAPI">Cryptoproapi</a> is maintained by <a href="https://github.com/shanhaichik">shanhaichik</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

